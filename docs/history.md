# Получение истории изменений баланса пользователя

Получить список всех операций с балансом пользователя - пополнений, списаний и переводов другим пользователям.
Каждая операция будет отражена отдельной транзакцией.

Доступна пагинация, сортировка по абсолютной сумме операции и дате.<br>
Дата и время транзакции - по **UTC**.

**URL** : `/v1/deposits/history`

**Метод** : `POST`

**Формат запроса**

```json
{
  "owner_id"       : "[строка, UUID]",
  "offset"         : "[число, неотрицательное, опционально]",
  "limit"          : "[число, положительное, опционально]",
  "order_by"       : "[строка, опционально, одно из двух значений: transaction_date или amount]",
  "order_direction": "[строка, опционально, одно из двух значений: ASC или DESC]"
}
```

**Пример запроса**

```json
{
  "owner_id": "8c5593a0-37d3-11ec-8d3d-0242ac130001",
  "offset": 0,
  "limit": 2,
  "order_by": "amount",
  "order_direction": "DESC"
}
```

## Ответ - успех

**Условие**: пользователь не имеет истории операций, либо счет указанного пользователя
не существует в системе

**Код** : `200 OK`

**Пример ответа**

```json
[]
```

### ИЛИ 

**Условие**: пользователь имеет историю операций

**Код** : `200 OK`

**Пример ответа**

```json
[
  {
    "id": 6,
    "sender_id": "00000000-0000-0000-0000-000000000000",
    "recipient_id": "8c5593a0-37d3-11ec-8d3d-0242ac130001",
    "amount": 5000,
    "description": "VISA top-up",
    "transaction_date": "2021-11-10T14:23:11.574584Z"
  },
  {
    "id": 8,
    "sender_id": "8c5593a0-37d3-11ec-8d3d-0242ac130001",
    "recipient_id": "6e726185-586e-49a7-89a4-6cfc2b03b0a2",
    "amount": 300,
    "description": "happy birthday!",
    "transaction_date": "2021-11-10T14:24:17.414591Z"
  }
]
```

## Ответ - ошибка

**Причина** : Параметры запроса некорректны

**Код** : `400 BAD REQUEST`

**Пример ответа** :

```json
{
  "status": 400,
  "message": "There is some problem with the data you submitted.",
  "details": [
    {
      "field": "owner_id",
      "error": "must be a valid UUID"
    }
  ]
}
```
